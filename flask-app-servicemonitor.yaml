apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: flask-app-sm
  namespace: monitoring
  labels:
    release: prometheus            # must match your Helm release name
spec:
  selector:
    matchLabels:
      app: flask-app               # matches the "app: flaskâ€‘app" in your Service
  namespaceSelector:
    matchNames:
      - default                    # namespace where your Flask app lives
  endpoints:
    - port: http                   # the name of the port in your Service (5000/TCP)
      path: /metrics               # where prometheus_client is exposing metrics
      interval: 15s
